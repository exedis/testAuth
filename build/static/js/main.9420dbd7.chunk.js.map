{"version":3,"sources":["features/Auth/molecules/AuthForm/AuthForm.module.scss","features/Auth/FormAuth.module.scss","features/Auth/atoms/AuthMessages/AuthMessages.module.scss","features/Auth/atoms/Loader/Loader.module.scss","assets/img/logo.svg","features/Auth/molecules/AuthForm/AuthForm.jsx","features/Auth/atoms/AuthMessages/AuthMessages.jsx","assets/img/loader.svg","features/Auth/atoms/Loader/Loader.jsx","features/Auth/FormAuth.jsx","App.js","index.js"],"names":["module","exports","AuthForm","onLogin","useState","email","setEmail","password","setPassword","action","className","styles","authForm","onSubmit","e","preventDefault","login","formControl","src","logo","alt","title","required","type","input","placeholder","name","value","onChange","val","target","btn","AuthMessages","message","template","hideMessage","useEffect","messageTimer","setTimeout","clearTimeout","classnames","error","Loader","loader","FormAuth","loadingServer","setLoadingServer","authorized","setAuthorized","userInfo","setUserInfo","success","text","alertMessage","setAlertMessage","getServerInfo","data","token","JSON","stringify","Promise","resolve","reject","setToken","localStorage","setItem","setUserAccountHandler","username","setAlertMessageHandler","getItem","then","response","user","parse","alert","onLoginHandler","account","logoutBtn","onClick","Content","wrapper","loading","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9420dbd7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"authForm\":\"AuthForm_authForm__3ppzM\",\"formControl\":\"AuthForm_formControl__1hX6f\",\"input\":\"AuthForm_input__2wh7G\",\"btn\":\"AuthForm_btn__3_ed6\",\"title\":\"AuthForm_title__14_Db\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"FormAuth_wrapper__3ftw5\",\"loading\":\"FormAuth_loading__2sCzl\",\"authorized\":\"FormAuth_authorized__nM63f\",\"logoutBtn\":\"FormAuth_logoutBtn__2DjJy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"AuthMessages_message__11l_L\",\"error\":\"AuthMessages_error__VwarZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3x1Se\"};","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, {useState} from 'react';\r\nimport styles from './AuthForm.module.scss';\r\nimport logo from '../../../../assets/img/logo.svg'\r\n\r\nconst AuthForm = ({onLogin}) => {\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const setEmailHandler = (val) => {\r\n        setEmail(val);\r\n    }\r\n    const setPasswordHandler = (val) => {\r\n        setPassword(val);\r\n    }\r\n    const login = (e) => {\r\n        e.preventDefault();\r\n        onLogin(email, password)\r\n    }\r\n\r\n    return (\r\n        <form action=\"\" className={styles.authForm} onSubmit={(e) => login(e)}>\r\n            <div className={styles.formControl}>\r\n                <img src={logo} alt=\"\"/>\r\n                <div className={styles.title}>Авторизация</div>\r\n            </div>\r\n            <div className={styles.formControl}>\r\n                <input required type=\"email\" className={styles.input} placeholder={'Email'} name={'email'} value={email}\r\n                       onChange={(e) => setEmailHandler(e.target.value)}/>\r\n            </div>\r\n            <div className={styles.formControl}>\r\n                <input required type=\"password\" className={styles.input} placeholder={'Пароль'} name={'pass'}\r\n                       value={password}\r\n                       onChange={(e) => setPasswordHandler(e.target.value)}/>\r\n            </div>\r\n\r\n            <div className={styles.formControl}>\r\n                <button className={styles.btn} type={'submit'}>Войти</button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default AuthForm;","import classnames from \"classnames\";\r\nimport React, {useEffect} from 'react';\r\nimport styles from \"./AuthMessages.module.scss\";\r\n\r\nconst AuthMessages = ({message, template, hideMessage}) => {\r\n\r\n    useEffect(() => {\r\n        const messageTimer = setTimeout(() => {\r\n            hideMessage();\r\n        }, 2000)\r\n        return () => {\r\n            clearTimeout(messageTimer);\r\n        };\r\n    });\r\n    if (!message) {\r\n        return null;\r\n    }\r\n    return (\r\n        <div className={classnames(styles.message, {[styles.error]: !template})}>\r\n            {message}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AuthMessages;","export default __webpack_public_path__ + \"static/media/loader.2f67a12a.svg\";","import React from 'react';\r\nimport styles from './Loader.module.scss';\r\nimport loader from '../../../../assets/img/loader.svg'\r\n\r\nconst Loader = () => {\r\n    return (\r\n        <div className={styles.loader}>\r\n            <img src={loader} alt=\"\"/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Loader;","import classnames from \"classnames\";\r\nimport React, {useState, useEffect} from 'react';\r\nimport {AuthForm} from \"./molecules\";\r\nimport {AuthMessages, Loader} from \"./atoms\";\r\nimport styles from './FormAuth.module.scss';\r\n\r\nconst FormAuth = () => {\r\n    const [loadingServer, setLoadingServer] = useState(false);\r\n    const [authorized, setAuthorized] = useState(false);\r\n    const [userInfo, setUserInfo] = useState({});\r\n    const [alertMessage, setAlertMessage] = useState({\r\n        success: true,\r\n        text: ''\r\n    });\r\n\r\n    function getServerInfo() {\r\n        let data = {\r\n            name: 'username',\r\n            login: 'dev@dev.com',\r\n            password: '123',\r\n            token: 'asdasda32423sdasdasda',\r\n            authorized: true,\r\n        }\r\n        data = JSON.stringify(data);\r\n        return new Promise(function (resolve, reject) {\r\n            setTimeout(() => {//имитируем задержку ответа\r\n                resolve(data);\r\n            }, 1000)\r\n        });\r\n    }\r\n\r\n    const setToken = (token) => localStorage.setItem('token', token);\r\n\r\n    const setUserAccountHandler = (name) => {\r\n        setUserInfo({\r\n            username: name\r\n        })\r\n    }\r\n\r\n    const setAlertMessageHandler = (success = true, text = '') => {\r\n        setAlertMessage({\r\n            success,\r\n            text,\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            setLoadingServer(true);\r\n            getServerInfo().then(\r\n                response => {\r\n                    const user = JSON.parse(response);\r\n                    if (user.authorized && user.token === token) {\r\n                        setAuthorized(true);\r\n                        setUserAccountHandler(user.name)\r\n                    }\r\n                    setLoadingServer(false);\r\n                }\r\n            )\r\n        }\r\n\r\n    }, [setLoadingServer])\r\n\r\n\r\n    function onLoginHandler(login, password) {\r\n        if (authorized) {\r\n            return setAlertMessageHandler(true, 'Вы уже авторизованы!');\r\n        }\r\n        setLoadingServer(true);\r\n\r\n        getServerInfo().then(\r\n            response => {\r\n                setLoadingServer(false);\r\n                const user = JSON.parse(response)\r\n                if (user.login === login && user.password === password) {\r\n                    setToken('asdasda32423sdasdasda');\r\n                    setAuthorized(true);\r\n                    setUserAccountHandler(user.name);\r\n                    setAlertMessageHandler(true, 'Успешно авторизован!');\r\n                } else {\r\n                    setAlertMessageHandler(false, 'Ошибка! Неправильный логин или пароль!');\r\n                }\r\n            },\r\n            error => {\r\n                alert(`Rejected: ${error}`)\r\n            }\r\n        );\r\n    }\r\n\r\n    const logout = () => {\r\n        if (authorized) {\r\n            setAuthorized(false);\r\n            setToken('');\r\n            setAlertMessageHandler(true, 'Выход выполнен');\r\n        }\r\n    }\r\n\r\n    const authForm = (<AuthForm onLogin={(login, password) => onLoginHandler(login, password)}/>)\r\n\r\n    const account = (<div className={styles.authorized}>\r\n        <h1>Привет, {userInfo.username}</h1>\r\n        <button className={styles.logoutBtn} onClick={logout} type={'button'}>Выйти</button>\r\n    </div>)\r\n\r\n    const Content = authorized ? account : authForm\r\n\r\n    return (\r\n        <div className={classnames(styles.wrapper, {[styles.loading]: loadingServer})}>\r\n            {loadingServer && <Loader/>}\r\n            {Content}\r\n            <AuthMessages message={alertMessage.text} template={alertMessage.success}\r\n                          hideMessage={() => setAlertMessage('')}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FormAuth;","import './App.css';\nimport {FormAuth} from \"./features/Auth\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <FormAuth/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}